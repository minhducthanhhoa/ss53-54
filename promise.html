<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- 
        Promise: sinh ra giải quyết các tác vụ bất đồng bộ
        giúp việc giải quyết bất đồng bộ mà bị callback hell (dùng callback)
        code nhìn gọn gàng , dễ chỉnh sửa , bảo trì hơn
        1. cú pháp
            let promise = new Promise()
            khởi tạo đối tượng promise từ obj constructor
            đối số của new promise nhận vào 1 cái hàm
            trong hàm này nhậ vào 2 tham số
            - resolve: giải quyết thành công
            - reject: từ chối thất bại
     -->
    <script>
        let promise = new Promise((resolve, reject) => {
            // viết logic xử lí code
            // nếu logic thành công thì gọi resolve. nhảy vào then
            // nếu logic thất bại thì gọi reject. nhảy vào catch
            resolve([1,2,3])
        })
        // khi khởi tạo promise thì nó đang ở trạng thái pending(chờ xử lí)
        promise.then((numbers) =>{
            console.log("khi thành công trả về dữ liệu", numbers);
        }).catch(() =>{
            console.log("khi thất bại báo lỗi!");
        })
        let promise1 = new Promise((resolve, reject) => {
            setTimeout(() =>{
                console.log("1111");
                resolve();
            },1000);
        })
        promise1
        .then(() =>{
            return new Promise((resolve, reject) => {
                setTimeout(() =>{
                    console.log("22222");
                    resolve();
                },1000);
            })
        })
        .then(() =>{
            return new Promise((resolve, reject) => {
                setTimeout(() =>{
                    console.log("3333");
                    resolve();
                },1000);
            })
        })

        // bên trong phương thức then có nhiều then khác , kết quả trả về của then đầu là tham số đầu vào của then sau
    </script>
</body>
</html>